#
# milli_httpd Makefile
#
# Copyright (C) 2001 ASUSTek Inc.
#
# $Id: Makefile,v 1.1.1.1 2007/01/25 12:52:37 jiahao_jhou Exp $
#
CFLAGS	+= -I. -I$(TOP)/shared -I$(SRCBASE)/include -Wall -I. -Wall -Dlinux $(GLOBAL_OPTIONS)
 
#CFLAGS	+= -g -DDEBUG
CFLAGS	+= -s -O2 -DNO_PARALLEL
LDFLAGS	+= -L$(TOP)/nvram -L$(TOP)/shared -L$(TOP)/netconf -lnvram -lshared -lnetconf

vpath %.c $(TOP)/shared

all: infosvr

clean:
	rm -f *.o *~ infosvr

install: all
# Neo
#	install -d $(INSTALLDIR)/usr/sbin
#	install httpd $(INSTALLDIR)/usr/sbin
#	$(STRIP) $(INSTALLDIR)/usr/sbin/httpd

	install -d $(INSTALLDIR)/usr/sbin
	$(STRIP) infosvr
	install infosvr $(INSTALLDIR)/usr/sbin

infosvr: ./infosvr.o ./wlutils.o ./common.o ./packet.o ./service.o ./interface.o ./storage.o

	$(CC) -o $@ $^ $(LDFLAGS) $(CFLAGS)
